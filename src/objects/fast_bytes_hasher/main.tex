\documentclass{article}
\usepackage{amssymb}

\title{MFBH: Merlin Fast Bytes Hasher}
\author{Eric Buehler}
\date{May 2023}

\begin{document}

\maketitle

\section{Motivation and Introduction}
The goal for MFBH is to be a faster, non-cryptographically secure algorithm
to minimize hash collisions and improve performance for small byte sequences, such as variable names.
It achieves this by using a simple sum-and-multiply method to trade off security for
performance.

\section{Algorithm}
let res = 0 \\
let len = [bytes length] \\
Loop: [sum bytes into res, each multiplied by index+1] \\
Note the maximum value is $255 \times len!$


\section{Big-O complexity}
$O(n)$, or on the order of O(len) because of the $len$ loop iterations.

\section{CPU Instructions}
No. instructions where $len$ is the length of the string: $f(7len+4)$ \\
+1 for loading 0 and storing as res\\
+2 for loading and storing length \\
+1 for loading bytes \\
+len for loop tmp var load and store \\
+len for loop tmp idx load and store \\
+len for loop tmp idx increment \\
+len for loop tmp idx multiply to loop tmp var \\
+len for addition to res \\
+len for update (reassign) to res \\

\section{Performance analysis and DefaultHash}
Merlin will use MFBH on strings less than 256 bytes in length.
It is only designed for relatively short strings. My processor runs at 2.9 Ghz on average, and takes 0.34482759 ns per instruction.
For a string that is 256 bytes long, it takes 620 ns for MFBH to theoretically run.
However, for a string that is 10 bytes long, it takes just 26 ns for MFBH to run in an ideal situation.
A string that is 1 byte long takes only 4 ns in theory. Merlin's
string implementation will switch to DefaultHash provided by Rust (which is SipHash).
MFBH works best for very small strings.\\

In the SipHash paper (http://cr.yp.to/siphash/siphash-20120918.pdf), it takes 140 cycles for 16 bytes.
However, MFBH takes 116 for the same byte sequence. This is a 20.69\% improvement over SipHash!

\end{document}
